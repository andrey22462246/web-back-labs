{% extends "base.html" %}

{% block lab %}Лабораторная работа 3{% endblock %}

{% block main %}
    <h1>Железнодорожный билет</h1>

    <div style="border: 2px solid #333; padding: 20px; max-width: 600px; margin: 0 auto; background: linear-gradient(135deg, #f5f5f5, #e0e0e0);">
        <div style="text-align: center; border-bottom: 2px dashed #333; padding-bottom: 15px; margin-bottom: 15px;">
            <h2 style="margin: 0; color: #d40000;">РОССИЙСКИЕ ЖЕЛЕЗНЫЕ ДОРОГИ</h2>
            <p style="margin: 5px 0; font-weight: bold;">ЭЛЕКТРОННЫЙ БИЛЕТ</p>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
            <div>
                <p><strong>Пассажир:</strong><br>{{ fio }}</p>
                <p><strong>Тип билета:</strong><br>
                    {% if is_child %}
                        <span style="color: #d40000;">ДЕТСКИЙ БИЛЕТ</span>
                    {% else %}
                        Взрослый
                    {% endif %}
                </p>
                <p><strong>Возраст:</strong><br>{{ age }} лет</p>
            </div>
            
            <div>
                <p><strong>Маршрут:</strong><br>{{ departure }} → {{ destination }}</p>
                <p><strong>Дата:</strong><br>{{ date }}</p>
                <p><strong>Полка:</strong><br>
                    {% if shelf == 'lower' %}Нижняя
                    {% elif shelf == 'upper' %}Верхняя
                    {% elif shelf == 'lower_side' %}Нижняя боковая
                    {% elif shelf == 'upper_side' %}Верхняя боковая
                    {% endif %}
                </p>
            </div>
        </div>

        <div style="margin: 15px 0; padding: 10px; background-color: #fff; border-radius: 5px;">
            <p><strong>Дополнительные услуги:</strong></p>
            <ul style="margin: 0; padding-left: 20px;">
                {% if bedding %}<li>Бельё</li>{% endif %}
                {% if luggage %}<li>Багаж</li>{% endif %}
                {% if insurance %}<li>Страховка</li>{% endif %}
            </ul>
        </div>

        <div style="text-align: center; border-top: 2px dashed #333; padding-top: 15px; margin-top: 15px;">
            <h3 style="margin: 0; color: #d40000;">ИТОГО К ОПЛАТЕ: {{ total_price }} руб.</h3>
            
            <div style="font-size: 14px; color: #666; margin-top: 10px;">
                <p>Состав стоимости:</p>
                <p>Билет: {{ base_price }} руб. 
                {% if shelf_price > 0 %}+ Полка: {{ shelf_price }} руб.{% endif %}
                {% if bedding %} + Бельё: 75 руб.{% endif %}
                {% if luggage %} + Багаж: 250 руб.{% endif %}
                {% if insurance %} + Страховка: 150 руб.{% endif %}</p>
            </div>
        </div>
    </div>

    <div style="text-align: center; margin-top: 20px;">
        <a href="/lab3/ticket" style="padding: 10px 20px; background-color: #28a745; color: white; text-decoration: none; border-radius: 5px;">
            Оформить новый билет
        </a>
        <a href="/lab3" style="margin-left: 10px; color: #007bff;">Вернуться в лабу</a>
    </div>
{% endblock %}