{% extends "base.html" %}

{% block lab %}–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ 3{% endblock %}

{% block main %}
    <h1>–ü–æ–∏—Å–∫ —Å–º–∞—Ä—Ç—Ñ–æ–Ω–æ–≤</h1>
    
    <div style="background-color: #f8f9fa; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
        <form>
            <div style="display: grid; grid-template-columns: 1fr 1fr auto; gap: 15px; align-items: end;">
                <div>
                    <label for="min_price">–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞:</label>
                    <input type="number" id="min_price" name="min_price" 
                           value="{{ min_price }}" 
                           placeholder="{{ min_price_all }}"
                           min="0" style="width: 100%; padding: 8px;">
                </div>
                
                <div>
                    <label for="max_price">–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞:</label>
                    <input type="number" id="max_price" name="max_price" 
                           value="{{ max_price }}" 
                           placeholder="{{ max_price_all }}"
                           min="0" style="width: 100%; padding: 8px;">
                </div>
                
                <div style="display: flex; gap: 10px;">
                    <button type="submit" style="padding: 8px 16px; background-color: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer;">
                        –ò—Å–∫–∞—Ç—å
                    </button>
                    <button type="submit" name="reset" value="1" style="padding: 8px 16px; background-color: #6c757d; color: white; border: none; border-radius: 4px; cursor: pointer;">
                        –°–±—Ä–æ—Å
                    </button>
                </div>
            </div>
        </form>
        
        <div style="margin-top: 10px; font-size: 14px; color: #666;">
            –î–∏–∞–ø–∞–∑–æ–Ω —Ü–µ–Ω: –æ—Ç {{ min_price_all }} –¥–æ {{ max_price_all }} —Ä—É–±.
        </div>
    </div>

    <div style="margin-bottom: 20px;">
        <h2>
            {% if min_price or max_price %}
                –ù–∞–π–¥–µ–Ω–æ —Ç–æ–≤–∞—Ä–æ–≤: {{ total_found }} –∏–∑ {{ total_all }}
            {% else %}
                –í—Å–µ —Ç–æ–≤–∞—Ä—ã: {{ total_all }}
            {% endif %}
        </h2>
        
        {% if min_price or max_price %}
            <div style="color: #666; font-size: 14px;">
                –§–∏–ª—å—Ç—Ä: 
                {% if min_price %}–æ—Ç {{ min_price }} —Ä—É–±{% endif %}
                {% if max_price %}{% if min_price %} –¥–æ {% else %}–¥–æ {% endif %}{{ max_price }} —Ä—É–±{% endif %}
            </div>
        {% endif %}
    </div>

    {% if products %}
        <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px;">
            {% for product in products %}
                <div style="border: 1px solid #ddd; border-radius: 10px; padding: 15px; background-color: white;">
                    <h3 style="margin-top: 0; color: #007bff;">{{ product.name }}</h3>
                    <div style="margin-bottom: 10px;">
                        <strong>–ë—Ä–µ–Ω–¥:</strong> {{ product.brand }}<br>
                        <strong>–¶–≤–µ—Ç:</strong> {{ product.color }}<br>
                        <strong>–ü–∞–º—è—Ç—å:</strong> {{ product.storage }}
                    </div>
                    <div style="font-size: 18px; font-weight: bold; color: #28a745;">
                        {{ product.price }} —Ä—É–±.
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <div style="text-align: center; padding: 40px; background-color: #f8f9fa; border-radius: 10px;">
            <h3 style="color: #666;">üòî –ù–µ –Ω–∞–π–¥–µ–Ω–æ –Ω–∏ –æ–¥–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–∞</h3>
            <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–∏—Å–∫–∞</p>
        </div>
    {% endif %}

    <div style="margin-top: 20px;">
        <a href="/lab3" style="color: #007bff;">‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π —Ä–∞–±–æ—Ç–µ 3</a>
    </div>
{% endblock %}